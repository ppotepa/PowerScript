// Validation.ps - Type checking and validation operations for PowerScript
// Provides number and character validation functions

LINK System
// Core.ps is linked via StandardLibrary.ps

// ============================================================================
// NUMERIC VALIDATION
// ============================================================================

FUNCTION IS_POSITIVE(INT n) {
    FLEX result = 0
    IF (n > 0) {
        result = 1
    }
    RETURN result
}

FUNCTION IS_NEGATIVE(INT n) {
    FLEX result = 0
    IF (n < 0) {
        result = 1
    }
    RETURN result
}

FUNCTION IS_ZERO(INT n) {
    FLEX result = 0
    IF (n == 0) {
        result = 1
    }
    RETURN result
}

FUNCTION IS_NON_NEGATIVE(INT n) {
    FLEX result = 0
    IF (n >= 0) {
        result = 1
    }
    RETURN result
}

FUNCTION IS_NON_POSITIVE(INT n) {
    FLEX result = 0
    IF (n <= 0) {
        result = 1
    }
    RETURN result
}

// ============================================================================
// RANGE VALIDATION
// ============================================================================

FUNCTION IN_RANGE(INT value, INT min, INT max) {
    FLEX result = 0
    IF (value >= min) {
        IF (value <= max) {
            result = 1
        }
    }
    RETURN result
}

FUNCTION BETWEEN(INT value, INT min, INT max) {
    FLEX result = 0
    IF (value > min) {
        IF (value < max) {
            result = 1
        }
    }
    RETURN result
}

FUNCTION BETWEEN_INCLUSIVE(INT value, INT min, INT max) {
    FLEX result = 0
    IF (value >= min) {
        IF (value <= max) {
            result = 1
        }
    }
    RETURN result
}

// ============================================================================
// DIVISIBILITY CHECKS
// ============================================================================

FUNCTION IS_DIVISIBLE(INT n, INT divisor) {
    FLEX remainder = MOD(n, divisor)
    FLEX result = 0
    IF (remainder == 0) {
        result = 1
    }
    RETURN result
}

FUNCTION IS_MULTIPLE(INT n, INT base) {
    RETURN IS_DIVISIBLE(n, base)
}

// ============================================================================
// CHARACTER VALIDATION
// ============================================================================

FUNCTION IS_ALPHA(STRING c) {
    FLEX isLetter = #Char.IsLetter(c, 0)
    FLEX result = #Convert.ToInt32(isLetter)
    RETURN result
}

FUNCTION IS_DIGIT(STRING c) {
    FLEX isDigit = #Char.IsDigit(c, 0)
    FLEX result = #Convert.ToInt32(isDigit)
    RETURN result
}

FUNCTION IS_ALPHANUMERIC(STRING c) {
    FLEX isLetterOrDigit = #Char.IsLetterOrDigit(c, 0)
    FLEX result = #Convert.ToInt32(isLetterOrDigit)
    RETURN result
}

FUNCTION IS_UPPER(STRING c) {
    FLEX isUpper = #Char.IsUpper(c, 0)
    FLEX result = #Convert.ToInt32(isUpper)
    RETURN result
}

FUNCTION IS_LOWER(STRING c) {
    FLEX isLower = #Char.IsLower(c, 0)
    FLEX result = #Convert.ToInt32(isLower)
    RETURN result
}

FUNCTION IS_WHITESPACE(STRING c) {
    FLEX isWhiteSpace = #Char.IsWhiteSpace(c, 0)
    FLEX result = #Convert.ToInt32(isWhiteSpace)
    RETURN result
}

// ============================================================================
// STRING VALIDATION
// ============================================================================

FUNCTION VALIDATE_NOT_EMPTY(STRING str) {
    FLEX len = #str->Length
    FLEX result = 0
    IF (len > 0) {
        result = 1
    }
    RETURN result
}

FUNCTION VALIDATE_LENGTH(STRING str, INT expectedLen) {
    FLEX len = #str->Length
    FLEX result = 0
    IF (len == expectedLen) {
        result = 1
    }
    RETURN result
}

FUNCTION VALIDATE_MIN_LENGTH(STRING str, INT minLen) {
    FLEX len = #str->Length
    FLEX result = 0
    IF (len >= minLen) {
        result = 1
    }
    RETURN result
}

FUNCTION VALIDATE_MAX_LENGTH(STRING str, INT maxLen) {
    FLEX len = #str->Length
    FLEX result = 0
    IF (len <= maxLen) {
        result = 1
    }
    RETURN result
}

// ============================================================================
// NUMERIC RANGE VALIDATION
// ============================================================================

FUNCTION VALIDATE_RANGE(INT value, INT min, INT max) {
    RETURN IN_RANGE(value, min, max)
}

FUNCTION VALIDATE_MIN(INT value, INT min) {
    FLEX result = 0
    IF (value >= min) {
        result = 1
    }
    RETURN result
}

FUNCTION VALIDATE_MAX(INT value, INT max) {
    FLEX result = 0
    IF (value <= max) {
        result = 1
    }
    RETURN result
}

// ============================================================================
// TYPE CHECKING (using .NET reflection-like checks)
// ============================================================================

// TODO: ISINT and ISSTRING require method chaining support (#value->GetType()->ToString())
// For now, these return placeholder values
FUNCTION ISINT(FLEX value) {
    RETURN 0
}

FUNCTION ISSTRING(FLEX value) {
    RETURN 1
}

FUNCTION ISEMPTY(STRING str) {
    FLEX len = #str->Length
    IF (len == 0) {
        RETURN 1
    }
    RETURN 0
}



