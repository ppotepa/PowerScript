// Test 42: Complex Program - Comprehensive demonstration
// Features: nested functions, nested loops, nested conditionals, multiple variables

FLEX globalCounter = 0

FUNCTION processData(value) [INT] {
    FLEX localResult = 0
    
    IF value > 10 {
        CYCLE 2 TIMES {
            localResult = localResult + 5
        }
    } ELSE {
        IF value > 5 {
            localResult = value * 2
        } ELSE {
            localResult = value
        }
    }
    
    globalCounter = globalCounter + 1
    RETURN localResult
}

FUNCTION runProgram() [INT] {
    FLEX total = 0
    FLEX testValue = 3
    
    PRINT "Starting complex program"
    
    CYCLE 3 TIMES {
        FLEX result = processData(testValue)
        total = total + result
        testValue = testValue + 4
        
        IF testValue > 10 AND total > 0 {
            PRINT "Threshold reached"
        }
    }
    
    PRINT "Execution count: "
    PRINT globalCounter
    PRINT "Total result: "
    PRINT total
    
    RETURN total
}

FLEX finalResult = runProgram()
PRINT "Program completed with result: "
PRINT finalResult
