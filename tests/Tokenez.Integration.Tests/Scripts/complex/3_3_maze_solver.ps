PRINT "=== Maze Pathfinding Algorithm ==="
PRINT "Finding path through a 5x5 grid maze"
PRINT ""

FLEX width = 5
FLEX height = 5

PRINT "Creating maze as 1D array (0=path, 1=wall)"
PRINT "Using row-major order: index = row * width + col"
PRINT ""

FLEX maze = [0, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0]

PRINT "Maze visualization:"
PRINT "Row 0: 0 1 0 0 0"
PRINT "Row 1: 0 1 1 1 0"
PRINT "Row 2: 0 0 0 1 0"
PRINT "Row 3: 1 1 0 0 0"
PRINT "Row 4: 0 0 1 1 0"
PRINT ""

FLEX startX = 0
FLEX startY = 0
FLEX endX = 4
FLEX endY = 4
FLEX currentX = 0
FLEX currentY = 0
FLEX pathLength = 0
FLEX foundPath = 0
FLEX maxSteps = 50

PRINT "Starting pathfinding from (0,0) to (4,4)"
PRINT ""

CYCLE 50 AS step {
    IF foundPath == 0 {
        PRINT "Step:"
        PRINT step
        PRINT "Position (x,y):"
        PRINT currentX
        PRINT currentY
        
        IF currentX == endX AND currentY == endY {
            FLEX foundPath = 1
            PRINT "*** PATH FOUND! ***"
        } ELSE {
            FLEX moved = 0
            
            FLEX nextX = currentX + 1
            FLEX nextY = currentY + 1
            
            IF moved == 0 AND nextX < width {
                FLEX cellIndex = currentY * width + nextX
                FLEX cellValue = maze[cellIndex]
                
                IF cellValue == 0 {
                    FLEX currentX = nextX
                    FLEX pathLength = pathLength + 1
                    FLEX moved = 1
                    PRINT "Moving RIGHT"
                }
            }
            
            IF moved == 0 AND nextY < height {
                FLEX cellIndex = nextY * width + currentX
                FLEX cellValue = maze[cellIndex]
                
                IF cellValue == 0 {
                    FLEX currentY = nextY
                    FLEX pathLength = pathLength + 1
                    FLEX moved = 1
                    PRINT "Moving DOWN"
                }
            }
            
            IF moved == 0 {
                PRINT "STUCK! No valid moves available"
                FLEX foundPath = 1
            }
        }
        
        PRINT ""
    }
}

PRINT "=== Pathfinding Complete ==="
PRINT ""
PRINT "Path found:"
PRINT foundPath
PRINT "Path length:"
PRINT pathLength
PRINT "Final position (x,y):"
PRINT currentX
PRINT currentY
